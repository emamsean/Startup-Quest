<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startup Quest</title>
    <!-- Load React and ReactDOM from CDN -->
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add a custom font, Inter -->
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for glowing buttons */
        .glow-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .glow-button.active {
            box-shadow: 0 0 10px #3b82f6, 0 0 20px #3b82f6, 0 0 30px #3b82f6;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-blue-100 min-h-screen flex items-center justify-center p-4">
    <div id="root"></div>

    <script>
        const { useState, useEffect } = React;

        // --- Game Data ---
        const levels = [
            {
                id: 1,
                name: "Idea Spark",
                description: "Brainstorm and validate a business idea.",
                tasks: [
                    { id: 1, text: "Identify a customer problem to solve.", points: 50, question: "What is a key principle of design thinking?", options: ["Profit first", "Customer empathy", "Rapid scaling"], correct: "Customer empathy", info: "Design thinking starts with deeply understanding customer needs and problems." }
                ]
            },
            {
                id: 2,
                name: "Market Fit",
                description: "Develop a Minimum Viable Product (MVP) and find your first customers.",
                tasks: [
                    { id: 2, text: "Define your target customer persona.", points: 75, question: "What is an MVP?", options: ["A maximum valuable product", "A minimum viable product", "A marketing value proposition"], correct: "A minimum viable product", info: "An MVP is the version of a new product which allows a team to collect the maximum amount of validated learning about customers with the least effort." }
                ]
            },
            {
                id: 3,
                name: "Funding Round",
                description: "Prepare a pitch deck and seek early-stage investment.",
                tasks: [
                    { id: 3, text: "Create a compelling pitch deck.", points: 100, question: "What is a 'runway' in startup terms?", options: ["The time a plane takes off", "The total sales of the company", "The amount of time before the company runs out of money"], correct: "The amount of time before the company runs out of money", info: "A startup's runway is the period of time it can operate before it needs to raise more funding or become profitable." }
                ]
            }
        ];

        const App = () => {
            const [currentLevelIndex, setCurrentLevelIndex] = useState(0);
            const [points, setPoints] = useState(0);
            const [taskIndex, setTaskIndex] = useState(0);
            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState({});
            const [isAnswered, setIsAnswered] = useState(false);

            // --- Load saved progress from Local Storage ---
            useEffect(() => {
                const saved = localStorage.getItem("startupQuest");
                if (saved) {
                    try {
                        const { levelIndex, points, taskIndex } = JSON.parse(saved);
                        setCurrentLevelIndex(levelIndex);
                        setPoints(points);
                        setTaskIndex(taskIndex);
                    } catch (e) {
                        console.error("Failed to parse saved game data.", e);
                        // Reset if data is corrupted
                        localStorage.removeItem("startupQuest");
                    }
                }
            }, []);

            // --- Save progress to Local Storage whenever state changes ---
            useEffect(() => {
                localStorage.setItem("startupQuest", JSON.stringify({ levelIndex: currentLevelIndex, points, taskIndex }));
            }, [currentLevelIndex, points, taskIndex]);

            // --- Handlers ---
            const handleTaskClick = (task) => {
                setModalContent({ ...task, result: null });
                setShowModal(true);
                setIsAnswered(false);
            };

            const handleAnswer = (answer) => {
                if (isAnswered) return;
                setIsAnswered(true);

                if (answer === modalContent.correct) {
                    // Correct answer logic
                    setPoints(prevPoints => prevPoints + modalContent.points);
                    setModalContent(prevContent => ({
                        ...prevContent,
                        result: `Correct! ${modalContent.info}`
                    }));
                    
                    // Progress to the next task or level
                    const currentLevel = levels[currentLevelIndex];
                    if (taskIndex + 1 < currentLevel.tasks.length) {
                        setTimeout(() => {
                             setTaskIndex(prevIndex => prevIndex + 1);
                             setShowModal(false);
                        }, 2000); // Close modal and move to next task after 2s
                    } else if (currentLevelIndex + 1 < levels.length) {
                        setTimeout(() => {
                            setCurrentLevelIndex(prevIndex => prevIndex + 1);
                            setTaskIndex(0);
                            setShowModal(false);
                        }, 2000); // Close modal and move to next level after 2s
                    } else {
                        // Game completed
                        setTimeout(() => {
                            setModalContent(prevContent => ({ ...prevContent, result: "Congratulations! You've completed all levels!" }));
                        }, 2000);
                    }
                } else {
                    // Incorrect answer logic
                    setModalContent(prevContent => ({
                        ...prevContent,
                        result: "Incorrect. Try again!"
                    }));
                    setTimeout(() => setIsAnswered(false), 2000); // Allow another attempt after 2s
                }
            };
            
            // --- Current level and task data ---
            const currentLevel = levels[currentLevelIndex];
            
            // Render logic with plain JavaScript (no JSX)
            return React.createElement(
                "div",
                { className: "container max-w-xl mx-auto p-4 bg-white rounded-3xl shadow-xl border border-gray-200" },
                React.createElement(
                    "h1",
                    { className: "text-4xl font-extrabold text-center text-indigo-700 mb-6" },
                    "Startup Quest"
                ),
                React.createElement(
                    "div",
                    { className: "flex justify-between items-center bg-gray-100 p-4 rounded-xl mb-6 shadow-inner" },
                    React.createElement(
                        "div",
                        { className: "text-lg font-semibold text-gray-800" },
                        "Points: ",
                        React.createElement(
                            "span",
                            { className: "text-indigo-600 font-bold" },
                            points
                        )
                    ),
                    React.createElement(
                        "div",
                        { className: "text-lg font-semibold text-gray-800" },
                        "Level: ",
                        React.createElement(
                            "span",
                            { className: "text-indigo-600 font-bold" },
                            currentLevel.name
                        )
                    )
                ),
                React.createElement(
                    "div",
                    { className: "bg-white p-6 rounded-2xl border-2 border-indigo-300" },
                    React.createElement(
                        "h2",
                        { className: "text-2xl font-bold text-gray-800 mb-2" },
                        currentLevel.name
                    ),
                    React.createElement(
                        "p",
                        { className: "text-gray-600 mb-4" },
                        currentLevel.description
                    ),
                    React.createElement(
                        "div",
                        { className: "space-y-4" },
                        currentLevel.tasks.map((task, index) =>
                            React.createElement(
                                "button",
                                {
                                    key: task.id,
                                    onClick: () => handleTaskClick(task),
                                    className: `w-full p-4 rounded-xl text-left font-semibold glow-button
                                        ${index === taskIndex ? 'bg-indigo-600 text-white active' : 'bg-gray-200 text-gray-700'}`,
                                    disabled: index !== taskIndex
                                },
                                `Task ${task.id}: ${task.text}`
                            )
                        )
                    )
                ),
                showModal && React.createElement(
                    "div",
                    { className: "fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4" },
                    React.createElement(
                        "div",
                        { className: "bg-white p-8 rounded-3xl max-w-sm w-full shadow-2xl" },
                        React.createElement(
                            "h2",
                            { className: "text-2xl font-bold text-gray-800 mb-2" },
                            modalContent.text
                        ),
                        React.createElement(
                            "p",
                            { className: "mb-4 text-gray-700" },
                            modalContent.question
                        ),
                        React.createElement(
                            "div",
                            { className: "space-y-3" },
                            modalContent.options.map((option, i) =>
                                React.createElement(
                                    "button",
                                    {
                                        key: i,
                                        onClick: () => handleAnswer(option),
                                        className: `w-full p-3 rounded-xl text-white font-medium transition-all duration-300
                                            ${isAnswered && option === modalContent.correct ? 'bg-green-500' : 'bg-blue-500 hover:bg-blue-600'}`,
                                        disabled: isAnswered
                                    },
                                    option
                                )
                            )
                        ),
                        modalContent.result && React.createElement(
                            "p",
                            { className: `mt-6 text-center font-semibold text-lg transition-all duration-300
                                ${modalContent.result.includes("Correct") ? 'text-green-600' : 'text-red-600'}` },
                            modalContent.result
                        ),
                        React.createElement(
                            "button",
                            {
                                onClick: () => setShowModal(false),
                                className: "mt-6 w-full p-3 bg-gray-300 text-gray-800 font-semibold rounded-xl hover:bg-gray-400 transition-colors"
                            },
                            "Close"
                        )
                    )
                )
            );
        };

        // --- Use the modern createRoot method to render the app ---
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(React.createElement(App, null));
    </script>
</body>
</html>
