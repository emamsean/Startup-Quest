<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startup Quest</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/babel-standalone@7.24.7/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Game data
        const levels = [
            { id: 1, name: "Idea Spark", description: "Brainstorm a business idea and validate it.", tasks: [
                { id: 1, text: "Identify a customer problem to solve.", points: 50, question: "What is a key principle of design thinking?", options: ["Profit first", "Customer empathy", "Rapid scaling"], correct: "Customer empathy", info: "Design thinking starts with understanding customer needs." }
            ]},
            // Add more levels (e.g., Market Fit, Funding Round) here
        ];

        const App = () => {
            const [currentLevel, setCurrentLevel] = useState(0);
            const [points, setPoints] = useState(0);
            const [taskIndex, setTaskIndex] = useState(0);
            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState({});

            // Load saved progress
            useEffect(() => {
                const saved = localStorage.getItem("startupQuest");
                if (saved) {
                    const { level, points } = JSON.parse(saved);
                    setCurrentLevel(level);
                    setPoints(points);
                }
            }, []);

            // Save progress
            useEffect(() => {
                localStorage.setItem("startupQuest", JSON.stringify({ level: currentLevel, points }));
            }, [currentLevel, points]);

            const handleTaskClick = (task) => {
                setModalContent(task);
                setShowModal(true);
            };

            const handleAnswer = (answer) => {
                if (answer === modalContent.correct) {
                    setPoints(points + modalContent.points);
                    setModalContent({ ...modalContent, result: "Correct! " + modalContent.info });
                    if (taskIndex + 1 < levels[currentLevel].tasks.length) {
                        setTaskIndex(taskIndex + 1);
                    } else if (currentLevel + 1 < levels.length) {
                        setCurrentLevel(currentLevel + 1);
                        setTaskIndex(0);
                    }
                } else {
                    setModalContent({ ...modalContent, result: "Incorrect. Try again!" });
                }
            };

            return (
                <div className="max-w-md mx-auto p-4">
                    <h1 className="text-3xl font-bold text-center text-blue-600 mb-4">Startup Quest</h1>
                    <div className="bg-white p-4 rounded-lg shadow-md mb-4">
                        <p className="text-lg font-semibold">Points: {points}</p>
                        <p className="text-lg font-semibold">Level: {levels[currentLevel].name}</p>
                        <p className="text-gray-600">{levels[currentLevel].description}</p>
                    </div>
                    <div className="space-y-4">
                        {levels[currentLevel].tasks.map((task, index) => (
                            <button
                                key={task.id}
                                onClick={() => handleTaskClick(task)}
                                className={`w-full p-3 rounded-lg text-left ${index === taskIndex ? 'bg-blue-500 text-white' : 'bg-gray-200'}`}
                                disabled={index !== taskIndex}
                            >
                                Task {task.id}: {task.text}
                            </button>
                        ))}
                    </div>
                    {showModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
                            <div className="bg-white p-6 rounded-lg max-w-sm w-full">
                                <h2 className="text-xl font-bold mb-2">{modalContent.text}</h2>
                                <p className="mb-4">{modalContent.question}</p>
                                <div className="space-y-2">
                                    {modalContent.options.map((option, i) => (
                                        <button
                                            key={i}
                                            onClick={() => handleAnswer(option)}
                                            className="w-full p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"
                                        >
                                            {option}
                                        </button>
                                    ))}
                                </div>
                                {modalContent.result && (
                                    <p className="mt-4 text-center">{modalContent.result}</p>
                                )}
                                <button
                                    onClick={() => setShowModal(false)}
                                    className="mt-4 w-full p-2 bg-gray-500 text-white rounded-lg"
                                >
                                    Close
                                </button>
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById("root"));
    </script>
</body>
</html>
