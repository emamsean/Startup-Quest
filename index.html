<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Startup Quest</title>
    <!-- Load React and ReactDOM from CDN -->
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Add a custom font, Inter -->
    <link rel="stylesheet" href="https://rsms.me/inter/inter.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for glowing buttons */
        .glow-button {
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .glow-button.active {
            box-shadow: 0 0 10px #3b82f6, 0 0 20px #3b82f6, 0 0 30px #3b82f6;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-blue-100 min-h-screen flex items-center justify-center p-4">
    <div id="root"></div>

    <script>
        const { useState, useEffect } = React;

        // --- Game Data ---
        const levels = [
            {
                id: 1,
                name: "Idea Spark",
                description: "Brainstorm and validate a business idea by identifying a real-world problem and a solution.",
                tasks: [
                    { id: 1, text: "Identify a customer problem to solve.", points: 50, question: "What is a key principle of design thinking?", options: ["Profit first", "Customer empathy", "Rapid scaling"], correct: "Customer empathy", info: "Design thinking is a non-linear, iterative process that teams use to understand users, challenge assumptions, redefine problems, and create innovative solutions to prototype and test." }
                ],
                framework: "1. **Empathize:** Understand your users' needs and motivations.\n2. **Define:** State your users' needs and problems.\n3. **Ideate:** Challenge assumptions and create ideas.\n4. **Prototype:** Start to create solutions.\n5. **Test:** Try out your prototypes.",
                sample: "A freelance artist, struggling to organize her large collection of digital brushes and assets, shares her frustration online. You realize this is a common problem for digital artists. You conduct interviews with several artists to understand their workflow and pain points, validating the need for a better asset management tool."
            },
            {
                id: 2,
                name: "Market Fit",
                description: "Build a Minimum Viable Product (MVP), test it with your target audience, and find your first customers.",
                tasks: [
                    { id: 2, text: "Define your target customer persona.", points: 75, question: "What is an MVP?", options: ["A maximum valuable product", "A minimum viable product", "A marketing value proposition"], correct: "A minimum viable product", info: "An MVP is the simplest version of your product that can be released to a set of early customers who will provide feedback to help you iterate and improve." }
                ],
                framework: "1. **Build a simple MVP:** Create a core feature set to solve the primary problem.\n2. **Find early adopters:** Identify and engage with your first customers.\n3. **Collect feedback:** Listen to what your users say about your product.\n4. **Iterate:** Use feedback to improve your MVP.",
                sample: "You build a simple desktop application that allows artists to tag and search for their digital assets. You give this early version to a group of five artists who participated in your interviews. They provide invaluable feedback on the user interface and suggest a key feature: an integration with their favorite drawing software. You use this feedback to plan the next version of the product."
            },
            {
                id: 3,
                name: "Funding Round",
                description: "Prepare a pitch deck and seek early-stage investment.",
                tasks: [
                    { id: 3, text: "Create a compelling pitch deck.", points: 100, question: "What is a 'runway' in startup terms?", options: ["The time a plane takes off", "The total sales of the company", "The amount of time before the company runs out of money"], correct: "The amount of time before the company runs out of money", info: "A startup's runway is the amount of time they have before their cash runs out. It's a critical metric for investors and founders alike." }
                ],
                framework: "1. **Develop a Pitch Deck:** Create a concise and visually appealing presentation.\n2. **Practice Your Pitch:** Rehearse your presentation until it's smooth and confident.\n3. **Identify Investors:** Research and find investors who align with your industry.\n4. **Network and Pitch:** Attend events and present your startup to potential investors.",
                sample: "With a polished MVP and a clear user base, you create a compelling pitch deck. It highlights the problem, your solution, the positive feedback from your early adopters, and your plan to integrate with more software. You pitch to a venture capitalist who specializes in creative tools and secure a pre-seed round of funding, giving you the runway needed to hire your first team member and continue development."
            }
        ];

        const App = () => {
            const [currentLevelIndex, setCurrentLevelIndex] = useState(0);
            const [points, setPoints] = useState(0);
            const [taskIndex, setTaskIndex] = useState(0);
            const [showModal, setShowModal] = useState(false);
            const [modalContent, setModalContent] = useState({});
            const [isAnswered, setIsAnswered] = useState(false);
            const [isGameComplete, setIsGameComplete] = useState(false);
            const [showFinalModal, setShowFinalModal] = useState(false);
            const [finalModalContent, setFinalModalContent] = useState({});

            // --- Load saved progress from Local Storage ---
            useEffect(() => {
                const saved = localStorage.getItem("startupQuest");
                if (saved) {
                    try {
                        const { levelIndex, points, taskIndex } = JSON.parse(saved);
                        setCurrentLevelIndex(levelIndex);
                        setPoints(points);
                        setTaskIndex(taskIndex);
                        if (levelIndex >= levels.length -1 && taskIndex >= levels[levelIndex].tasks.length -1 ) {
                            setIsGameComplete(true);
                        }
                    } catch (e) {
                        console.error("Failed to parse saved game data.", e);
                        localStorage.removeItem("startupQuest");
                    }
                }
            }, []);

            // --- Save progress to Local Storage whenever state changes ---
            useEffect(() => {
                localStorage.setItem("startupQuest", JSON.stringify({ levelIndex: currentLevelIndex, points, taskIndex }));
            }, [currentLevelIndex, points, taskIndex]);

            // --- Handlers ---
            const handleTaskClick = (task) => {
                setModalContent({ ...task, result: null });
                setShowModal(true);
                setIsAnswered(false);
            };

            const handleAnswer = (answer) => {
                if (isAnswered) return;
                setIsAnswered(true);

                if (answer === modalContent.correct) {
                    setPoints(prevPoints => prevPoints + modalContent.points);
                    
                    // Add the framework to the modal content on correct answer
                    setModalContent(prevContent => ({
                        ...prevContent,
                        result: `Correct! ${modalContent.info}`,
                        framework: levels[currentLevelIndex].framework
                    }));
                } else {
                    // Incorrect answer logic
                    setModalContent(prevContent => ({
                        ...prevContent,
                        result: "Incorrect. Try again!"
                    }));
                    setTimeout(() => setIsAnswered(false), 2000); // Allow another attempt after 2s
                }
            };
            
            const handleCloseModal = () => {
                const currentLevel = levels[currentLevelIndex];
                
                // If the answer was correct, progress the game
                if (isAnswered && modalContent.result && modalContent.result.includes("Correct")) {
                    if (taskIndex + 1 < currentLevel.tasks.length) {
                         setTaskIndex(prevIndex => prevIndex + 1);
                    } else if (currentLevelIndex + 1 < levels.length) {
                        setCurrentLevelIndex(prevIndex => prevIndex + 1);
                        setTaskIndex(0);
                    } else {
                        setIsGameComplete(true);
                    }
                }
                
                setShowModal(false);
                setIsAnswered(false);
            };

            // --- Handler for clicking a level in the final workflow ---
            const handleFinalLevelClick = (level) => {
                setFinalModalContent(level);
                setShowFinalModal(true);
            };
            
            // --- New restart function ---
            const handleRestart = () => {
                localStorage.removeItem("startupQuest");
                setCurrentLevelIndex(0);
                setPoints(0);
                setTaskIndex(0);
                setIsGameComplete(false);
            };

            // --- Current level and task data ---
            const currentLevel = levels[currentLevelIndex];
            
            // Render logic with plain JavaScript (no JSX)
            return React.createElement(
                "div",
                { className: "container max-w-xl mx-auto p-4 bg-white rounded-3xl shadow-xl border border-gray-200" },
                React.createElement(
                    "h1",
                    { className: "text-4xl font-extrabold text-center text-indigo-700 mb-6" },
                    "Startup Quest"
                ),
                React.createElement(
                    "div",
                    { className: "flex justify-between items-center bg-gray-100 p-4 rounded-xl mb-6 shadow-inner" },
                    React.createElement(
                        "div",
                        { className: "text-lg font-semibold text-gray-800" },
                        "Points: ",
                        React.createElement(
                            "span",
                            { className: "text-indigo-600 font-bold" },
                            points
                        )
                    ),
                    React.createElement(
                        "div",
                        { className: "text-lg font-semibold text-gray-800" },
                        isGameComplete ? "Status: Complete" : `Level: ${currentLevel.name}`
                    )
                ),
                React.createElement(
                    "div",
                    { className: "bg-white p-6 rounded-2xl border-2 border-indigo-300" },
                    isGameComplete ? (
                        React.createElement(
                            "div",
                            null,
                            React.createElement(
                                "h2",
                                { className: "text-2xl font-bold text-center text-green-600 mb-4" },
                                "Congratulations! Your Startup Journey is Complete!"
                            ),
                            React.createElement(
                                "p",
                                { className: "text-center text-gray-600 mb-6" },
                                "Select a phase below to review its framework."
                            ),
                            React.createElement(
                                "div",
                                { className: "space-y-4" },
                                levels.map((level, index) => 
                                    React.createElement(
                                        "button",
                                        {
                                            key: level.id,
                                            onClick: () => handleFinalLevelClick(level),
                                            className: `w-full p-4 rounded-xl text-left font-semibold text-white bg-indigo-600 hover:bg-indigo-700 transition-colors`
                                        },
                                        `Phase ${index + 1}: ${level.name}`
                                    )
                                )
                            )
                        )
                    ) : (
                        React.createElement(
                            "div",
                            null,
                            React.createElement(
                                "h2",
                                { className: "text-2xl font-bold text-gray-800 mb-2" },
                                currentLevel.name
                            ),
                            React.createElement(
                                "p",
                                { className: "text-gray-600 mb-4" },
                                currentLevel.description
                            ),
                            React.createElement(
                                "div",
                                { className: "space-y-4" },
                                currentLevel.tasks.map((task, index) =>
                                    React.createElement(
                                        "button",
                                        {
                                            key: task.id,
                                            onClick: () => handleTaskClick(task),
                                            className: `w-full p-4 rounded-xl text-left font-semibold glow-button
                                                ${index === taskIndex ? 'bg-indigo-600 text-white active' : 'bg-gray-200 text-gray-700'}`,
                                            disabled: index !== taskIndex
                                        },
                                        `Task ${task.id}: ${task.text}`
                                    )
                                )
                            )
                        )
                    )
                ),
                React.createElement(
                    "button",
                    {
                        onClick: handleRestart,
                        className: "mt-6 w-full p-3 bg-red-500 text-white font-semibold rounded-xl hover:bg-red-600 transition-colors"
                    },
                    "Restart Game"
                ),
                showModal && React.createElement(
                    "div",
                    { className: "fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4" },
                    React.createElement(
                        "div",
                        { className: "bg-white p-8 rounded-3xl max-w-sm w-full shadow-2xl" },
                        React.createElement(
                            "h2",
                            { className: "text-2xl font-bold text-gray-800 mb-2" },
                            modalContent.text
                        ),
                        React.createElement(
                            "p",
                            { className: "mb-4 text-gray-700" },
                            modalContent.question
                        ),
                        React.createElement(
                            "div",
                            { className: "space-y-3" },
                            modalContent.options.map((option, i) =>
                                React.createElement(
                                    "button",
                                    {
                                        key: i,
                                        onClick: () => handleAnswer(option),
                                        className: `w-full p-3 rounded-xl text-white font-medium transition-all duration-300
                                            ${isAnswered && option === modalContent.correct ? 'bg-green-500' : 'bg-blue-500 hover:bg-blue-600'}`,
                                        disabled: isAnswered
                                    },
                                    option
                                )
                            )
                        ),
                        modalContent.result && React.createElement(
                            "div",
                            null,
                            React.createElement(
                                "p",
                                { className: `mt-6 text-center font-semibold text-lg transition-all duration-300
                                    ${modalContent.result.includes("Correct") ? 'text-green-600' : 'text-red-600'}` },
                                modalContent.result
                            ),
                            modalContent.framework && React.createElement(
                                "div",
                                { className: "mt-4 p-4 bg-gray-100 rounded-lg" },
                                React.createElement(
                                    "h3",
                                    { className: "text-xl font-bold text-gray-800 mb-2" },
                                    "The Framework"
                                ),
                                modalContent.framework.split('\n').map((line, i) => 
                                    React.createElement(
                                        "p",
                                        { key: i, className: "text-gray-700 mb-1", dangerouslySetInnerHTML: { __html: line.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') } }
                                    )
                                )
                            )
                        ),
                        React.createElement(
                            "button",
                            {
                                onClick: handleCloseModal,
                                className: "mt-6 w-full p-3 bg-gray-300 text-gray-800 font-semibold rounded-xl hover:bg-gray-400 transition-colors"
                            },
                            "Close"
                        )
                    )
                ),
                showFinalModal && React.createElement(
                    "div",
                    { className: "fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4" },
                    React.createElement(
                        "div",
                        { className: "bg-white p-8 rounded-3xl max-w-sm w-full shadow-2xl" },
                        React.createElement(
                            "h2",
                            { className: "text-2xl font-bold text-gray-800 mb-2" },
                            finalModalContent.name
                        ),
                        React.createElement(
                            "p",
                            { className: "mb-4 text-gray-700" },
                            finalModalContent.description
                        ),
                        finalModalContent.framework && React.createElement(
                            "div",
                            { className: "mt-4 p-4 bg-gray-100 rounded-lg" },
                            React.createElement(
                                "h3",
                                { className: "text-xl font-bold text-gray-800 mb-2" },
                                "The Framework"
                            ),
                            finalModalContent.framework.split('\n').map((line, i) => 
                                React.createElement(
                                    "p",
                                    { key: i, className: "text-gray-700 mb-1", dangerouslySetInnerHTML: { __html: line.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') } }
                                )
                            )
                        ),
                        finalModalContent.sample && React.createElement(
                            "div",
                            { className: "mt-4 p-4 bg-gray-100 rounded-lg" },
                            React.createElement(
                                "h3",
                                { className: "text-xl font-bold text-gray-800 mb-2" },
                                "Completed Sample"
                            ),
                            React.createElement(
                                "p",
                                { className: "text-gray-700" },
                                finalModalContent.sample
                            )
                        ),
                        React.createElement(
                            "button",
                            {
                                onClick: () => setShowFinalModal(false),
                                className: "mt-6 w-full p-3 bg-gray-300 text-gray-800 font-semibold rounded-xl hover:bg-gray-400 transition-colors"
                            },
                            "Close"
                        )
                    )
                )
            );
        };

        // --- Use the modern createRoot method to render the app ---
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(React.createElement(App, null));
    </script>
</body>
</html>
